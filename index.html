<div class="ba-admin">
  <div class="ba-shell">
    <header class="ba-header">
      <h1>Stellenanzeigen – Admin</h1>
      <p class="ba-sub">Anlegen, bearbeiten &amp; an die BA übertragen</p>
    </header>

    <div class="ba-toast-layer" aria-live="polite" aria-atomic="true">
      <div id="notice" class="ba-toast" role="status" aria-hidden="true">Bereit.</div>
    </div>

    <main class="ba-content">
      <!-- Formular -->
      <form id="job-form" class="ba-card ba-card--form" novalidate>
        <!-- BASIS -->
        <fieldset class="ba-section">
          <legend>Basisdaten</legend>
          <div class="ba-section__body">
            <div class="ba-grid">
              <div class="ba-field">
                <label class="ba-label" for="job_title">Stellentitel *</label>
                <input id="job_title" name="job_title" class="ba-input" required placeholder="z. B. Webentwickler/in" />
              </div>

              <div class="ba-field">
                <label class="ba-label" for="employment_type">Beschäftigungsart *</label>
                <select id="employment_type" name="employment_type" class="ba-select" required>
                  <option value="">Bitte wählen</option>
                  <option value="Vollzeit">Vollzeit</option>
                  <option value="Teilzeit">Teilzeit</option>
                  <option value="Befristet">Befristet</option>
                  <option value="Minijob">Minijob</option>
                  <option value="Praktikum">Praktikum</option>
                  <option value="Ausbildung">Ausbildung</option>
                </select>
              </div>

              <div class="ba-field">
                <label class="ba-label" for="working_hours">Wochenstunden</label>
                <input id="working_hours" name="working_hours" class="ba-input" type="number" min="1" step="1" placeholder="z. B. 40" />
              </div>

              <div class="ba-field">
                <label class="ba-label" for="valid_from">Veröffentlichen ab *</label>
                <input id="valid_from" name="valid_from" class="ba-input" type="date" required />
              </div>

              <div class="ba-field">
                <label class="ba-label" for="valid_to">Veröffentlichen bis *</label>
                <input id="valid_to" name="valid_to" class="ba-input" type="date" required />
              </div>

              <div class="ba-field ba-field--full">
                <label class="ba-label" for="description_rich">Beschreibung *</label>
                <textarea id="description_rich" name="description_rich" class="ba-textarea" required placeholder="Aufgaben, Profil, Benefits …"></textarea>
              </div>
            </div>
          </div>
        </fieldset>

        <!-- ORT -->
        <fieldset class="ba-section">
          <legend>Arbeitsort</legend>
          <div class="ba-section__body">
            <div class="ba-grid">
              <div class="ba-field">
                <label class="ba-label" for="location_street">Straße &amp; Nr.</label>
                <input id="location_street" name="location_street" class="ba-input" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="location_postcode">PLZ *</label>
                <input id="location_postcode" name="location_postcode" class="ba-input" required inputmode="numeric" maxlength="10" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="location_city">Ort *</label>
                <input id="location_city" name="location_city" class="ba-input" required />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="location_country">Land *</label>
                <select id="location_country" name="location_country" class="ba-select" required>
                  <option value="DE" selected>Deutschland (DE)</option>
                  <option value="AT">Österreich (AT)</option>
                  <option value="CH">Schweiz (CH)</option>
                </select>
              </div>
            </div>
          </div>
        </fieldset>

        <!-- BEWERBUNG & KONTAKT -->
        <fieldset class="ba-section">
          <legend>Bewerbung &amp; Kontakt</legend>
          <div class="ba-section__body">
            <div class="ba-grid">
              <div class="ba-field">
                <label class="ba-label" for="application_email">Bewerbungs-E-Mail</label>
                <input id="application_email" name="application_email" class="ba-input" type="email" placeholder="jobs@firma.de" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="application_url">Bewerbungs-URL</label>
                <input id="application_url" name="application_url" class="ba-input" type="url" placeholder="https://firma.de/karriere" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="contact_name">Ansprechpartner/in *</label>
                <input id="contact_name" name="contact_name" class="ba-input" required />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="contact_email">Kontakt-E-Mail</label>
                <input id="contact_email" name="contact_email" class="ba-input" type="email" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="contact_phone">Telefon</label>
                <input id="contact_phone" name="contact_phone" class="ba-input" />
              </div>
            </div>
            <p class="ba-hint">Mindestens <strong>E-Mail</strong> <em>oder</em> <strong>URL</strong> muss befüllt sein.</p>
          </div>
        </fieldset>

        <!-- BERUF (BA) -->
        <fieldset class="ba-section">
          <legend>BA-Beruf</legend>
          <div class="ba-section__body">
            <div class="ba-field ba-autocomplete">
              <label class="ba-label" for="ba-search">Beruf (Suche in BA-Liste)</label>
              <input id="ba-search" class="ba-input" autocomplete="off" placeholder="z. B. Industriemechaniker/in" />
              <ul id="suggestions" class="ba-suggestions hidden" role="listbox" aria-label="Vorschläge"></ul>
            </div>

            <div class="ba-grid">
              <div class="ba-field">
                <label class="ba-label" for="ba_title_label">Berufsbezeichnung</label>
                <input id="ba_title_label" name="ba_title_label" class="ba-input ba-input--readonly" type="text" readonly />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="ba_bkz">Codenummer (BKZ)</label>
                <input id="ba_bkz" name="ba_bkz" class="ba-input ba-input--readonly" type="text" readonly />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="ba_title_code">TitleCode</label>
                <input id="ba_title_code" name="ba_title_code" class="ba-input ba-input--readonly" type="text" readonly />
              </div>
            </div>

            <p class="ba-hint">Die drei Felder werden durch die Suche gesetzt und sind nicht editierbar.</p>
          </div>
        </fieldset>

        <!-- UNTERNEHMEN / SUPPLIER -->
        <fieldset class="ba-section">
          <legend>Unternehmen &amp; Supplier</legend>
          <div class="ba-section__body">
            <div class="ba-grid">
              <div class="ba-field">
                <label class="ba-label" for="company_name">Unternehmensname *</label>
                <input id="company_name" name="company_name" class="ba-input" required />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="company_website">Website</label>
                <input id="company_website" name="company_website" class="ba-input" type="url" placeholder="https://…" />
              </div>
              <div class="ba-field">
                <label class="ba-label" for="supplier_id">Partner-/Supplier-ID (10-stellig) *</label>
                <input id="supplier_id" name="supplier_id" class="ba-input" value="v000000100" />
              </div>
            </div>

            <!-- Dateinamen-Vorschau -->
            <div class="ba-inline-notice" id="filename_box">
              <strong>Dateinamen-Vorschau:</strong> <code id="filename_preview">–</code>
            </div>
          </div>
        </fieldset>

        <!-- PROZESS -->
        <fieldset class="ba-section">
          <legend>Prozess</legend>
          <div class="ba-section__body">
            <label class="ba-toggle" for="transfer_flag">
              <input id="transfer_flag" name="transfer_flag" type="checkbox" />
              <span>Für Übertragung an BA vormerken</span>
            </label>

            <div class="ba-field ba-field--compact">
              <label class="ba-label" for="cms_item_id">CMS Item ID</label>
              <input
                id="cms_item_id"
                name="cms_item_id"
                class="ba-input ba-input--readonly"
                type="text"
                readonly
                placeholder="–"
              />
            </div>

            <!-- interne IDs -->
          </div>
        </fieldset>

        <!-- Aktionen -->
        <div class="ba-actions">
          <button type="submit" class="ba-btn ba-btn--primary" id="save">Speichern</button>
          <button type="submit" class="ba-btn ba-btn--primary is-hidden" id="update">Aktualisieren</button>
          <button type="button" class="ba-btn ba-btn--ghost is-hidden" id="cancel-edit">Abbrechen</button>
          <button type="button" class="ba-btn" id="upload-now">Jetzt an BA übertragen</button>
          <div class="ba-spacer"></div>
        </div>
      </form>

      <!-- ===== CMS-Übersicht & Auswahl-Upload ===== -->
      <section class="ba-card ba-card--list">
        <div class="ba-listbar">
          <div class="ba-listbar__group">
            <input id="list-search" class="ba-input" placeholder="Suche Titel/Ort …" />
            <select id="list-filter-status" class="ba-select">
              <option value="">Status: alle</option>
              <option value="Noch nicht an BA übertragen">Noch nicht an BA übertragen</option>
              <option value="OK">OK (übermittelt)</option>
              <option value="ERROR">Fehler</option>
            </select>
            <label class="ba-check" for="list-only-flag">
              <input id="list-only-flag" type="checkbox" />
              <span>nur transfer_flag = true</span>
            </label>
          </div>
          <div class="ba-listbar__group">
            <button type="button" class="ba-btn" id="btn-refresh">Aktualisieren</button>
          </div>
        </div>

        <div class="ba-table-wrapper">
          <table class="ba-table" id="cms-table">
            <thead>
              <tr>
                <th class="ba-table__checkbox"><input type="checkbox" id="select-all" /></th>
                <th>CMS Item ID</th>
                <th>Titel</th>
                <th>Standort</th>
                <th>Aktualisiert</th>
                <th>Vormerkung</th>
                <th>BA-Status</th>
                <th class="ba-table__actions">Aktion</th>
              </tr>
            </thead>
            <tbody id="cms-tbody">
              <tr><td colspan="8">Noch keine Daten.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="ba-list-actions">
          <div class="ba-list-actions__group">
            <button type="button" class="ba-btn ba-btn--primary" id="btn-upload-selected" disabled>
              Ausgewählte direkt übertragen (0)
            </button>
            <button type="button" class="ba-btn ba-btn--ghost" id="btn-generate-xml" disabled>XML-Datei generieren</button>
            <button type="button" class="ba-btn" id="btn-clear-selection" disabled>Auswahl leeren</button>
          </div>
          <div class="ba-list-actions__group">
            <button type="button" class="ba-btn ba-btn--ghost" id="btn-load-more" disabled>Mehr laden …</button>
          </div>
        </div>
      </section>
    </main>
  </div>
</div>
